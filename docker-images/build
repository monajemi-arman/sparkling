#!/bin/bash

SCRIPT_DIR="$(dirname "$0")"

cd "$SCRIPT_DIR" || { echo "Error: Could not change to script directory."; exit 1; }

for dir in */; do
    if [ -d "$dir" ]; then
        IMAGE_NAME="${dir%/}"
        echo "--- Building Docker image: $IMAGE_NAME ---"

        (
            cd "$dir" || { echo "Error: Could not change to directory $dir."; continue; }
            docker build -t "$IMAGE_NAME" .
            if [ $? -ne 0 ]; then
                echo "Error: Docker build failed for $IMAGE_NAME."
            fi
        )
        echo ""
    fi
done